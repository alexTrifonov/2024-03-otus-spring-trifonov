import{a as n}from"./index-DW_MHI2K.js";import{_ as k,c as r,a as e,t as u,g as h,v as c,h as p,F as d,d as g,o as i}from"./index-CJCJ3rio.js";const b={data(){return{id:this.$route.params.bookId,authors:[],genres:[],title:"",authorDto:{},genreDto:{},book:{}}},async mounted(){await n.get("/api/books/".concat(this.id)).then(s=>{this.book=s.data,this.title=this.book.title}).catch(s=>this.$router.push("/error")),n.get("/api/authors").then(s=>{this.authors=s.data,this.authorDto=this.book.authorDto}).catch(s=>this.$router.push("/error")),n.get("/api/genres").then(s=>{this.genres=s.data,this.genreDto=this.book.genreDto}).catch(s=>this.$router.push("/error"))},methods:{updateBook(){n.put("/api/books/".concat(this.id),{id:this.id,title:this.title,authorDto:this.authorDto,genreDto:this.genreDto}).then(s=>{this.$router.push("/books")}).catch(s=>this.$router.push("/error"))},goToBooks(){this.$router.push("/books")}}},m={class:"row"},D=["value"],f={class:"row"},v=["value"],B={class:"row"};function w(s,t,x,T,a,l){return i(),r(d,null,[e("h2",null,"Book updating with id = "+u(s.$route.params.bookId),1),e("div",null,[e("div",null,[t[5]||(t[5]=e("label",{class:"green",for:"title-input"},"Title",-1)),h(e("input",{class:"lilac","onUpdate:modelValue":t[0]||(t[0]=o=>a.title=o),placeholder:"Enter title"},null,512),[[c,a.title]])]),e("div",m,[t[6]||(t[6]=e("label",{class:"green",for:"author-select"},"Author:",-1)),h(e("select",{id:"author-select",class:"box","onUpdate:modelValue":t[1]||(t[1]=o=>this.authorDto=o)},[(i(!0),r(d,null,g(a.authors,o=>(i(),r("option",{value:o},u(o.fullName),9,D))),256))],512),[[p,this.authorDto]])]),e("div",f,[t[7]||(t[7]=e("label",{class:"green",for:"genre-select"},"Genre",-1)),h(e("select",{id:"genre-select",class:"box","onUpdate:modelValue":t[2]||(t[2]=o=>this.genreDto=o)},[(i(!0),r(d,null,g(a.genres,o=>(i(),r("option",{value:o},u(o.name),9,v))),256))],512),[[p,this.genreDto]])]),e("div",B,[e("button",{class:"fancy-btn",onClick:t[3]||(t[3]=(...o)=>l.updateBook&&l.updateBook(...o))},"Update book"),e("button",{class:"fancy-btn",onClick:t[4]||(t[4]=(...o)=>l.goToBooks&&l.goToBooks(...o))},"Back to books")])])],64)}const V=k(b,[["render",w]]);export{V as default};
