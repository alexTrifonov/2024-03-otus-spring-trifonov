import{a}from"./index-DW_MHI2K.js";import{_ as p,c as r,a as o,g as u,v as c,h as g,F as d,d as k,t as h,o as l}from"./index-CJCJ3rio.js";const b={data(){return{message:"",authors:[],genres:[],title:"",authorDto:{},genreDto:{},book:{}}},mounted(){a.get("/api/authors").then(s=>{this.authors=s.data,this.authorDto=this.authors[0]}).catch(s=>this.$router.push("/error")),a.get("/api/genres").then(s=>{this.genres=s.data,this.genreDto=this.genres[0]}).catch(s=>this.$router.push("/error"))},methods:{addBook(){a.post("/api/books",{title:this.title,authorDto:this.authorDto,genreDto:this.genreDto}).then(s=>{this.message="You have successfully added new book with id = ".concat(s.data.id)}).catch(s=>this.$router.push("/error"))},goToBooks(){this.$router.push("/books")}}},m={key:0},f={class:"row"},v={class:"row"},D=["value"],B=["value"],w={class:"row"},x={key:1};function y(s,t,T,_,n,i){return l(),r(d,null,[t[8]||(t[8]=o("h2",null,"Adding new book",-1)),this.message.length==0?(l(),r("div",m,[o("div",f,[t[5]||(t[5]=o("label",{class:"green",for:"book-title-input"},"Title:",-1)),u(o("input",{class:"lilac",id:"book-title-input","onUpdate:modelValue":t[0]||(t[0]=e=>n.title=e),placeholder:"Enter title"},null,512),[[c,n.title]])]),o("div",v,[t[6]||(t[6]=o("label",{class:"green",for:"author-select"},"Author:",-1)),u(o("select",{id:"author",class:"box","onUpdate:modelValue":t[1]||(t[1]=e=>this.authorDto=e)},[(l(!0),r(d,null,k(n.authors,e=>(l(),r("option",{value:e},h(e.fullName),9,D))),256))],512),[[g,this.authorDto]])]),t[7]||(t[7]=o("label",{class:"green",for:"genre-select"},"Genre:",-1)),u(o("select",{id:"genre-select",class:"box","onUpdate:modelValue":t[2]||(t[2]=e=>this.genreDto=e)},[(l(!0),r(d,null,k(n.genres,e=>(l(),r("option",{value:e},h(e.name),9,B))),256))],512),[[g,this.genreDto]]),o("div",w,[o("button",{class:"fancy-btn",onClick:t[3]||(t[3]=(...e)=>i.addBook&&i.addBook(...e))},"Add new book"),o("button",{class:"fancy-btn",onClick:t[4]||(t[4]=(...e)=>i.goToBooks&&i.goToBooks(...e))},"Back to books")])])):(l(),r("div",x,h(n.message),1))],64)}const U=p(b,[["render",y]]);export{U as default};
